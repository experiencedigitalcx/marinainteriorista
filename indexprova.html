<!-- /*
* Template Name: Minimal
* Template Author: Untree.co
* Author URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">

  <meta name="description" content="" />
  <meta name="keywords" content="" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=PT+Mono&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/jquery.fancybox.min.css">
  <link rel="stylesheet" href="fonts/icomoon/style.css">
  <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
  <link rel="stylesheet" href="css/aos.css">
  <link rel="stylesheet" href="css/style.css">

  <title>MARINA ROMERO</title>
</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="100">

  <div class="lines-wrap">
    <div class="lines-inner">
      <div class="lines"></div>
    </div>
  </div>
  <!-- END lines -->

  <div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close">
        <span class="icofont-close js-menu-toggle"></span>
      </div>
    </div>
    <div class="site-mobile-menu-body"></div>
  </div>
  
    
    

<div class="menu_fixed" id="menu">
  <div class="menu-row">
      <table style="width: 100%">
        <tr>
        <td style=" width: 50%">
            <a href="index.html">MARINA</a>
        </td>
        <td style="width: 50%">
             <a href="index.html">ROMERO</a>
        </td>
        
        </tr>    
    </table>
</div>
    </div>
    
    
    
 <div class="menu_fixed_down">
   
    <table style="width: 100%">
        <tr>
        <td style="text-align: left; padding-left: 10px; width: 50%">
            <a href="projectes.html">PROJECTES</a>
        </td>
        <td style="text-align: right; padding-right: 10px; width: 50%">
             <a href="serveis.html">ESTUDI</a>
        </td>
        
        </tr>    
    </table>
    </div>

<div id="image-container" style="position: relative; width: 100%; height: 100vh; overflow: hidden;"></div>

<style>
  #image-container img {
    position: absolute;
    object-fit: cover;
    transition: all 1s ease-in-out;
    will-change: transform, width, left, top, opacity;
  }
</style>

<script>
const imageContainer = document.getElementById("image-container");
const basePath = "images/marina/pantalla_home_img_materials/";

const steps = [
  { center: "32.jpg", sides: ["31.jpg", "23.jpg"] },
  { center: "23.jpg", sides: ["13.jpg", "11.jpg"] },
  { center: "13.jpg", sides: ["15.jpg", "16.jpg"] },
  { center: "16.jpg", sides: ["17.jpg", "3.jpg"] },
  { center: "17.jpg", sides: ["18.jpg", "29.jpg"] },
  { center: "18.jpg", sides: ["19.jpg", "33.jpg"] },
  { center: "19.jpg", sides: ["25.jpg", "28.jpg"] },
  { center: "25.jpg", sides: ["20.jpg", "32.jpg"] },
  { center: "20.jpg", sides: ["24.jpg", "2.jpg"] },
  { center: "24.jpg", sides: ["30.jpg", "22.jpg"] },
  { center: "30.jpg", sides: ["8.jpg", "4.jpg"] },
  { center: "8.jpg", sides: ["32.jpg", "7.jpg"] }
];

const centerSize = 480;
const sideSize = 200;
const duration = 1000; 
let index = 0;

function showStep() {
  const step = steps[index % steps.length];
  const pattern = index % 2 === 0
    ? [ { left: "75%", top: "15%", transform: "translate(-50%,0)" }, { left: "25%", top: "75%", transform: "translate(-50%,0)" } ]
    : [ { left: "75%", top: "75%", transform: "translate(-50%,0)" }, { left: "25%", top: "15%", transform: "translate(-50%,0)" } ];

  const prevImgs = Array.from(imageContainer.querySelectorAll("img"));
  const prevCenter = prevImgs.find(img => img.dataset.role === "center");
  const prevSides = prevImgs.filter(img => img.dataset.role === "side");

  // Triem la nova central
  let movingCenter = prevImgs.find(img => img.src.includes(step.center));

  if(!movingCenter) {
    movingCenter = document.createElement("img");
    movingCenter.src = basePath + step.center;
    movingCenter.style.width = sideSize + "px";
    movingCenter.style.height = "auto";
    movingCenter.style.opacity = 0;
    movingCenter.style.zIndex = 2;
    movingCenter.dataset.role = "center";
    imageContainer.appendChild(movingCenter);
    movingCenter.style.left = pattern[1].left;
    movingCenter.style.top = pattern[1].top;
    movingCenter.style.transform = pattern[1].transform;
  } else {
    movingCenter.dataset.role = "center";
    movingCenter.style.zIndex = 2;
  }

  // La petita que NO es mourà i la central anterior desapareixen **al mateix temps**
  prevSides.forEach(img => {
    if(img !== movingCenter) img.style.opacity = 0;
  });
  if(prevCenter) prevCenter.style.opacity = 0;

  // Transició de la nova central al centre
  setTimeout(() => {
    movingCenter.style.left = "50%";
    movingCenter.style.top = "50%";
    movingCenter.style.width = centerSize + "px";
    movingCenter.style.transform = "translate(-50%,-50%)";

    // Afegim noves petites del pas actual
    step.sides.forEach((src, i) => {
      const img = document.createElement("img");
      img.src = basePath + src;
      img.style.left = pattern[i].left;
      img.style.top = pattern[i].top;
      img.style.width = sideSize + "px";
      img.style.height = "auto";
      img.style.transform = pattern[i].transform;
      img.style.opacity = 0;
      img.style.zIndex = 1;
      img.dataset.role = "side";
      imageContainer.appendChild(img);
      setTimeout(() => img.style.opacity = 1, duration);
    });

    // Neteja del DOM després de la transició
    setTimeout(() => {
      Array.from(imageContainer.querySelectorAll("img")).forEach(img => {
        if(parseFloat(img.style.opacity) === 0) imageContainer.removeChild(img);
      });
    }, duration + 200);
  }, duration);

  index++;
}

// Inicialitzem el primer pas
function initFirstStep() {
  const first = steps[0];
  const pattern = [ { left: "75%", top: "15%", transform: "translate(-50%,0)" }, { left: "25%", top: "75%", transform: "translate(-50%,0)" } ];

  first.sides.forEach((src, i) => {
    const img = document.createElement("img");
    img.src = basePath + src;
    img.style.left = pattern[i].left;
    img.style.top = pattern[i].top;
    img.style.width = sideSize + "px";
    img.style.height = "auto";
    img.style.transform = pattern[i].transform;
    img.style.opacity = 0;
    img.style.zIndex = 1;
    img.dataset.role = "side";
    imageContainer.appendChild(img);
    setTimeout(() => img.style.opacity = 1, 200);
  });

  const centerImg = document.createElement("img");
  centerImg.src = basePath + first.center;
  centerImg.style.left = "50%";
  centerImg.style.top = "50%";
  centerImg.style.width = centerSize + "px";
  centerImg.style.height = "auto";
  centerImg.style.transform = "translate(-50%,-50%)";
  centerImg.style.opacity = 0;
  centerImg.style.zIndex = 2;
  centerImg.dataset.role = "center";
  imageContainer.appendChild(centerImg);
  setTimeout(() => centerImg.style.opacity = 1, 200);

  index++;
}

initFirstStep();
setInterval(showStep, 6000);
</script>


      
    <div id="overlayer"></div>
    <div class="loader">
      <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>

    
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/wave-animate.js"></script>
    <script src="js/circle-progress.js"></script>
    <script src="js/imagesloaded.pkgd.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="js/ScrollMagic.min.js"></script>
    <script src="js/scrollmagic.animation.gsap.min.js"></script>


    <script src="js/custom.js"></script>
    
  </body>

  </html>
